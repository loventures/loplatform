/*!
 / LO Platform copyright (C) 2007â€“2025 LO Ventures LLC.
 /
 / This program is free software: you can redistribute it and/or modify
 / it under the terms of the GNU Affero General Public License as published by
 / the Free Software Foundation, either version 3 of the License, or
 / (at your option) any later version.
 /
 / This program is distributed in the hope that it will be useful,
 / but WITHOUT ANY WARRANTY; without even the implied warranty of
 / MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 / GNU Affero General Public License for more details.
 /
 / You should have received a copy of the GNU Affero General Public License
 / along with this program.  If not, see <http://www.gnu.org/licenses/>.
 /

@import variables

.presence-widget
  position: relative

  > .unread-count
    color: $color-white
    display: none
    font-size: .75rem
    background: $color-alert
    padding: .1rem .25rem
    border-radius: 3em
    position: absolute
    top: 0
    right: 0

  &.unread-messages

    > .unread-count
      display: inline-block

.present-users-panel
  .panel-header
    .close-btn
      margin-right: .4rem

  .panel-inner
    display: flex
    flex-direction: column
    .panel-block.present-users-block
      flex: 1 0 auto
      .present-user
        @extend .m-2
    .panel-block:not(.present-users-block)
      flex: 0 0 auto

.present-users
  display: flex
  flex-wrap: wrap

.present-user
  transition: all ease $trans-speed
  &.chat-header-present-user
    font-size: 0.5em

  .present-user-name
    @extend .text-truncate
    text-align: center
    font-size: .8em

  .present-user-circle
    position: relative
    height: 5em
    width: 5em

    .present-user-photo
      height: 100%
      width: 100%
      border-radius: 50%
      overflow: hidden
      box-shadow: 0 1px 1px rgba(0,0,0,.25)
      border: 2px solid white

      .user-photo
        width: 100%
        height: 100%

      .user-letter
        width: 100%
        height: 100%
        font-size: 3em
        color: white
        @extend .flex-center-center
        font-weight: 0300

    .present-user-message-count
      position: absolute
      top: 0
      left: 0
      @extend .block-badge
      @extend .bg-primary

      transition: all ease $trans-speed
      visibility: hidden
      transform: scale(0)
      -webkit-transform: scale(0)

      &.unread-messages
        visibility: visible
        transform: scale(1)
        -webkit-transform: scale(1)

    .present-user-presence-indicator
      position: absolute
      width: 1.5em
      height: 1.5em
      right: 0
      bottom: 0
      content: ""
      border-radius: 50%
      border: 2px solid transparent
      transition: all ease $trans-speed

  &.Active
    .present-user-presence-indicator
      background-color: #00AD00
      border-color: $white

  &.Idle
    .present-user-presence-indicator
      background-color: #C78500
      border-color: $white

  &.Away
    .present-user-presence-indicator
      background-color: #FF0000
      border-color: $white

  &.Offline
    .present-user-presence-indicator
      background-color: #333
      border-color: $white

  &:hover,
  &:active,
  &:focus
    .present-user-photo
      @include box-shadow-halo($primary)
